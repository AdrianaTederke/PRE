{% extends "projetos/index.html" %} {% load staticfiles %} {% block headercss %}
<link href="{% static 'assets/morris.js-0.4.3/morris.css' %}" rel="stylesheet" /> {% endblock headercss %} {% block content %}
<section id="main-content">
    <section class="wrapper">
        <!-- page start-->
        <aside class="profile-info col-lg-12">
            <section class="panel">
                <div class="row">
                    {% include "projetos/menu.html" %} </div>
                <div class="bio-graph-heading">
                    PRE - UFSM
                </div>
                </div>
            </section>
            <section>
                <div id="morris">
                    <div class="row">
                        <div class="col-lg-6">
                            <section class="panel">
                                <header class="panel-heading">
                                    Filtro de Situação dos Projetos por Ano
                                    <form id="frm_pesquisa" method="post" action="{% url request|viewname %}">
                                        {% csrf_token %}
                                        <div class="input-group m-bot30 col-lg-4">
                                            <select name="filter_year" class="form-control m-bot30">
                                              <option {% if filtro_valor == 'Todos' %}selected{% endif %}>Todos</option>
                                              {% for ano, proj in projetos_por_ano.items %}
                                                <option {% if filtro_valor == ano %}selected{% endif %}>{{ ano }}</option>
                                              {% endfor %}
                                            </select>
                                            <span class="input-group-btn">
                                              <button type="submit" class="btn btn-white" type="button">Filtrar</button>
                                            </span>
                                        </div>
                                    </form>
                                </header>
                                <div class="panel-body text-center">
                                    <canvas id="pie_situacao" width="300"></canvas>
                                </div>
                                <div id="legend_situacao"></div>
                            </section>
                        </div>
                        <div class="col-lg-6">
                            <section class="panel">
                                <header class="panel-heading">
                                    Participantes / Vinculo
                                </header>
                                <div class="panel-body text-center">
                                    <canvas id="pie_vinculo" width="300"></canvas>
                                </div>
                                <div id="legend_vinculo"></div>
                            </section>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <heai proader class="panel-heading">
                                    Projetos / Ano
                                    </header>
                                    <div class="panel-body">
                                        <div id="bar_projetos_por_ano" class="graph"></div>
                                    </div>
                            </section>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <heai proader class="panel-heading">
                                    Projetos / Departamento
                                    </header>
                                     

                                    <div class="panel-body">
                                        <div id="bar_departamento" class="graph"></div>
                                    </div>
                            </section>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    Projetos / Unidade
                                </header>
                                 <form action="">
                                        <input type="checkbox" name="vehicle" value="EA-AC">Educação Artistica- Artes Cênicas 
                                          <input type="checkbox" name="vehicle" value="PGF-M">PG em Farmacologia- Mestrado 
                                          <input type="checkbox" name="vehicle" value="PGZ-D">PG Zootecnia- Doutorado 
                                          <input type="checkbox" name="vehicle" value="F-B">Física- Bacharelado
                                          <input type="checkbox" name="vehicle" value="F-HFI">Farmácia- Habitação Farmaceutico Industrial 
                                          <input type="checkbox" name="vehicle" value="LP-AIEF">Licenciatura Pedagogia-Anos Iniciais Ensino Fundamental 
                                          <input type="checkbox" name="vehicle" value="PGL-EL-M">PG  Letras- Estudos Literários- Mestrado
                                          <input type="checkbox" name="vehicle" value="F">Farmácia 
                                          <input type="checkbox" name="vehicle" value="DP-LP">Desenho e Plástica- Licenciatura Plena 
                                          <input type="checkbox" name="vehicle" value="CB-B">Ciência Biológica- Bacharelado
                                          

                                          

                                      </form>
                                <div class="panel-body">
                                    <div id="bar_unidade_proj" class="graph"></div>
                                </div>
                            </section>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    Participantes / Unidade
                                </header>
                                <div class="panel-body">
                                    <div id="bar_unidade_part" class="graph"></div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </section>
        </aside>
        </div>
        <!-- page end-->
    </section>
</section>
{% endblock content %} {% block pluginsjs %}
<script src="{% static 'assets/chart-master/Chart2.js' %}"></script>
<script src="{% static 'assets/morris.js-0.4.3/morris.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/morris.js-0.4.3/raphael-min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/jquery-knob/js/jquery.knob.js' %}"></script>
{% endblock pluginsjs %} {% block js-foot %}
<script>
    $(function() {
      $(".knob").knob({
        'draw' : function () { 
          $(this.i).val(this.cv + '%')
        }
      });
      var pieSituacaoData = [
          {% for k, v in projeto_situacao.items %}
          {
              value: {{ v }},
              color: '{{ ''|ramdom_color }}',
              label: "{{ k }}"
          },
          {% endfor %}
      ];
      var pieVinculoData = [
          {% for k, v in vinculo_participantes.items %}
          {
              value: {{ v }},
              color: '{{ ''|ramdom_color }}',
              label: "{{ k }}"
          },
          {% endfor %}
      ];
      myPieSituacao = new Chart(document.getElementById("pie_situacao").getContext("2d")).Pie(pieSituacaoData, {
          legendTemplate : '{{ legend_template|safe }}'
      });
      $("#legend_situacao").html(myPieSituacao.generateLegend());
      myPieVinculo = new Chart(document.getElementById("pie_vinculo").getContext("2d")).Pie(pieVinculoData, {
          legendTemplate : '{{ legend_template|safe }}'
      });
      $("#legend_vinculo").html(myPieVinculo.generateLegend());
      var barDepartamentoData = [
          {% for k, v in projeto_departamento.items %}
            { departamento: '{{ k }}', projetos: {{ v }} },
          {% endfor %}
      ]
      Morris.Bar({
        element: 'bar_departamento',
        data: barDepartamentoData,
        xkey: 'departamento',
        ykeys: ['projetos'],
        labels: ['Projetos'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });

      var barPPAData = [
          {% for k, v in projetos_por_ano.items %}
            { ano: '{{ k }}', projetos: {{ v }} },
          {% endfor %}
      ]
      Morris.Bar({
        element: 'bar_projetos_por_ano',
        data: barPPAData,
        xkey: 'ano',
        ykeys: ['projetos'],
        labels: ['Projetos'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });

      var barProjUnidadeData = [
          {% for k, v in projeto_unidade.items %}
            { unidade: '{{ k }}', projetos: {{ v }} },
          {% endfor %}
      ]
      Morris.Bar({
        element: 'bar_unidade_proj',
        data: barProjUnidadeData,
        xkey: 'unidade',
        ykeys: ['projetos'],
        labels: ['Projetos'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });
      var barPartUnidadeData = [
          {% for k, v in participante_unidade.items %}
            { unidade: '{{ k }}', partipante: {{ v }} },
          {% endfor %}
      ]
      Morris.Bar({
        element: 'bar_unidade_part',
        data: barPartUnidadeData,
        xkey: 'unidade',
        ykeys: ['partipante'],
        labels: ['Participantes'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });
    });
</script>
{% endblock %}
</body>

</html>
