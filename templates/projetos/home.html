{% extends "projetos/index.html" %}
{% load staticfiles %}
{% block headercss %}
<link href="{% static 'assets/morris.js-0.4.3/morris.css' %}" rel="stylesheet" />
{% endblock headercss %}
{% block content %}
<section id="main-content">
    <section class="wrapper">
        <!-- page start-->
        <div class="row">
            {% include "projetos/menu.html" %}
            <aside class="profile-info col-lg-9">
                <section class="panel">
                    <div class="bio-graph-heading">
                        Projetos de Extensão - UFSM
                    </div>
                    
                </section>

                <section>
                    <div id="morris">
                      <div class="row">
                          <div class="col-lg-6">
                              <section class="panel">
                                <header class="panel-heading">
                                    Projetos / Situação
                                </header>
                                <div class="panel-body text-center">
                                    <canvas id="pie_situacao"  width="300"></canvas>
                                </div>
                                <div id="legend_situacao"></div>
                            </section>
                          </div>
                          <div class="col-lg-6">
                              <section class="panel">
                                <header class="panel-heading">
                                    Participantes / Vinculo
                                </header>
                                <div class="panel-body text-center">
                                    <canvas id="pie_vinculo"  width="300"></canvas>
                                </div>
                                <div id="legend_vinculo"></div>
                            </section>
                          </div>
                      </div>
                      <div class="row">
                          <div class="col-lg-12">
                              <section class="panel">
                                  <header class="panel-heading">
                                      Projetos / Departamento
                                  </header>
                                  <div class="panel-body">
                                      <div id="bar_departamento" class="graph"></div>
                                  </div>
                              </section>
                          </div>
                      </div>
                      <div class="row">
                          <div class="col-lg-12">
                              <section class="panel">
                                  <header class="panel-heading">
                                      Projetos / Unidade
                                  </header>
                                  <div class="panel-body">
                                      <div id="bar_unidade_proj" class="graph"></div>
                                  </div>
                              </section>
                          </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12">
                              <section class="panel">
                                  <header class="panel-heading">
                                      Participantes / Unidade
                                  </header>
                                  <div class="panel-body">
                                      <div id="bar_unidade_part" class="graph"></div>
                                  </div>
                              </section>
                          </div>
                      </div>
                  </div>
                  </section>
            </aside>
        </div>

        <!-- page end-->
    </section>
</section>
{% endblock content %} 

{% block pluginsjs %}
<script src="{% static 'assets/chart-master/Chart2.js' %}"></script>
<script src="{% static 'assets/morris.js-0.4.3/morris.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/morris.js-0.4.3/raphael-min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/jquery-knob/js/jquery.knob.js' %}"></script>
{% endblock pluginsjs %}

{% block js-foot %}
  <script>
    $(function() {
      $(".knob").knob({
        'draw' : function () { 
          $(this.i).val(this.cv + '%')
        }
      });

      var pieSituacaoData = [
          {% for k, v in projeto_situacao.items %}
          {
              value: {{ v }},
              color: '{{ ''|ramdom_color }}',
              label: "{{ k }}"
          },
          {% endfor %}
      ];

      var pieVinculoData = [
          {% for k, v in vinculo_participantes.items %}
          {
              value: {{ v }},
              color: '{{ ''|ramdom_color }}',
              label: "{{ k }}"
          },
          {% endfor %}
      ];

      myPieSituacao = new Chart(document.getElementById("pie_situacao").getContext("2d")).Pie(pieSituacaoData, {
          legendTemplate : '{{ legend_template|safe }}'
      });
      $("#legend_situacao").html(myPieSituacao.generateLegend());

      myPieVinculo = new Chart(document.getElementById("pie_vinculo").getContext("2d")).Pie(pieVinculoData, {
          legendTemplate : '{{ legend_template|safe }}'
      });
      $("#legend_vinculo").html(myPieVinculo.generateLegend());


      var barDepartamentoData = [
          {% for k, v in projeto_departamento.items %}
<<<<<<< HEAD
            { departamento: '{{ k }}', projetos: {{ v }} },
=======
            { departamento: '{{ k }}', projetos: {{ v }}, legend: '' },
>>>>>>> 24ddb20d1acc65a26f3cb4f36d8d0c632d3129ed
          {% endfor %}
      ]

      Morris.Bar({
        element: 'bar_departamento',
        data: barDepartamentoData,
<<<<<<< HEAD
        xkey: 'departamento',
=======
        xkey: 'legend',
>>>>>>> 24ddb20d1acc65a26f3cb4f36d8d0c632d3129ed
        ykeys: ['projetos'],
        labels: ['Projetos'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });

      var barProjUnidadeData = [
          {% for k, v in projeto_unidade.items %}
<<<<<<< HEAD
            { unidade: '{{ k }}', projetos: {{ v }} },
=======
            { unidade: '{{ k }}', projetos: {{ v }}, legend: '' },
>>>>>>> 24ddb20d1acc65a26f3cb4f36d8d0c632d3129ed
          {% endfor %}
      ]

      Morris.Bar({
        element: 'bar_unidade_proj',
        data: barProjUnidadeData,
<<<<<<< HEAD
        xkey: 'unidade',
=======
        xkey: 'legend',
>>>>>>> 24ddb20d1acc65a26f3cb4f36d8d0c632d3129ed
        ykeys: ['projetos'],
        labels: ['Projetos'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });


      var barPartUnidadeData = [
          {% for k, v in participante_unidade.items %}
<<<<<<< HEAD
            { unidade: '{{ k }}', partipante: {{ v }} },
=======
            { unidade: '{{ k }}', partipante: {{ v }}, legend: '' },
>>>>>>> 24ddb20d1acc65a26f3cb4f36d8d0c632d3129ed
          {% endfor %}
      ]

      Morris.Bar({
        element: 'bar_unidade_part',
        data: barPartUnidadeData,
<<<<<<< HEAD
        xkey: 'unidade',
=======
        xkey: 'legend',
>>>>>>> 24ddb20d1acc65a26f3cb4f36d8d0c632d3129ed
        ykeys: ['partipante'],
        labels: ['Participantes'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#6883a3']
      });


    });
  </script>
{% endblock %}